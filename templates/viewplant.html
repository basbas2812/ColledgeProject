{% extends "base.html" %}

{% block title %}‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å{% endblock %}

{% block content %}
<div class="nav-breadcrumb">
    {% if plant %}
    <a href="{{ url_for('home') }}">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    <span>‚Ä∫</span>
    <span id="nameinfoplant">{{ plant.plantName }}</span>
</div>

<div class="info-cards" id="info-cards">
    <p>
        {% if plant.picture %}
        {% for img in plant.picture.split('|') %}
        <img src="{{ url_for('static', filename=img.strip()) }}"
            style="width:150px; height:150px; object-fit:cover; margin:5px; border-radius:6px; box-shadow:0 1px 4px rgba(0,0,0,0.2);">
        {% endfor %}

        {% else %}
        <img src="{{ url_for('static', filename='uploads/no_image.png') }}" alt="‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ" width="200">
        {% endif %}
    </p>

    <section class="plant-section">
        <h3>üå± ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡∏ä</h3>
        <p><strong>‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏∑‡∏ä:</strong> {{ plant.plantName }}</p>
        <p><strong>‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏î‡∏¥‡∏ô:</strong> {{ plant.prepare }}</p>
        <p><strong>‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤:</strong> {{ plant.care }}</p>
    </section>

    <section class="plant-section">
        <h3>üåø ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å</h3>
        {% if methods %}
        <ul>
            {% for method in methods %}
            <li>{{ method.plantingMethod }}</li>
            {% endfor %}
        </ul>
        {% else %}
        <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å</p>
        {% endif %}
    </section>

    <section class="plant-section">
        <h3>ü¶† ‡πÇ‡∏£‡∏Ñ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏û‡∏∑‡∏ä‡∏ô‡∏µ‡πâ</h3>
        {% if diseases %}
        <div class="disease-list">
            {% for disease in diseases %}
            <div class="disease-card">
                <button class="toggle-btn" onclick="toggleDisease('{{ loop.index0 }}')">
                    <span class="arrow">‚ñ∂</span> {{ disease.diseaseName }}
                </button>
                <div class="disease-details" id="disease-{{ loop.index0 }}" style="display:none;">
                    <p><strong>‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:</strong> {{ disease.symptoms }}</p>

                    <p><strong>‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏Å‡∏©‡∏≤:</strong></p>
                    {% if disease.treatments %}
                    <ul>
                        {% for t in disease.treatments %}
                        <li>{{ t }}</li>
                        {% endfor %}
                    </ul>
                    {% else %}
                    <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏Å‡∏©‡∏≤</p>
                    {% endif %}

                    {% if disease.medicines %}
                    <p><strong>‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ:</strong></p>
                    <ul>
                        {% for med in disease.medicines %}
                        <li>{{ med.medicineName }} ‚Äî {{ med.dosage }}</li>
                        {% endfor %}
                    </ul>
                    {% else %}
                    <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤</p>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏£‡∏Ñ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á</p>
        {% endif %}
    </section>


</div>
{% else %}
<div class="alert alert-info">
    <h4>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡∏ä</h4>
    <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏∑‡∏ä‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
</div>
{% endif %}
<script>
    function toggleDisease(index) {
        const detail = document.getElementById(`disease-${index}`);
        const btn = document.querySelector(`button[onclick="toggleDisease('${index}')"]`);
        const arrow = btn.querySelector(".arrow");

        if (detail.style.display === "none" || detail.style.display === "") {
            detail.style.display = "block";
            arrow.textContent = "‚ñº";   // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏π‡∏Å‡∏®‡∏£‡∏Ñ‡∏ß‡πà‡∏≥
        } else {
            detail.style.display = "none";
            arrow.textContent = "‚ñ∂";   // ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏π‡∏Å‡∏®‡∏£‡∏Ç‡∏ß‡∏≤
        }
    }
</script>
{% endblock %}